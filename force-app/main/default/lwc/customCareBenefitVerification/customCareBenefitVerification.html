<template>
  <div class="slds-container">
    <!-- Available Plans Section -->
    <section class="slds-section plans-section">
      <h2 class="slds-text-heading_medium">Available Plans</h2>
      <div class="slds-box plan-details">
        <p>{memberName} -- Member Plan</p>
        <p>Member Number: {memberNumber}</p>
        <p>Group Number: {groupNumber}</p>
        <p>Effective from: {effectiveDate}</p>
        <p>Plan Type: {planType}</p>
        <p>Relationship to Subscriber: {relationship}</p>
      </div>
    </section>

    <!-- Verification Panel -->
    <section class="slds-section verification-section">
      <h2 class="slds-text-heading_medium">{memberName} -- Member Plan</h2>
      <div class="slds-tabs_default tabs">
        <button class="slds-button slds-button_neutral" onclick={showPlanLevelBenefits}>Plan Level Benefits</button>
        <button class="slds-button slds-button_neutral" onclick={showCoverageBenefitDetails}>Coverage Benefit Details</button>
      </div>

      <template if:true={showVerifyButton}>
        <div class="slds-box slds-theme_info verify-prompt">
          <p>Verify Benefits</p>
          <p>Click the "Verify Benefits" button to run a benefits verification.</p>
          <button class="slds-button slds-button_brand" onclick={handleVerify}>Verify Benefits</button>
        </div>
      </template>

      <template if:true={showSuccessfulDetails}>
        <div class="slds-box slds-theme_success verification-success">
          <h3 class="slds-text-heading_small">Last Successful Verification</h3>
          <p>Service Date: {lastSuccessful.serviceDate}</p>
          <p>Plan Name: {lastSuccessful.planName}</p>
          <p>Coverage End: {lastSuccessful.coverageEndDate}</p>
          <!-- Add more fields as needed -->
        </div>
      </template>

      <template if:true={showRequestDropdown}>
        <div class="slds-box verification-history">
          <label for="request-select" class="slds-form-element__label">Select Previous Request</label>
          <select id="request-select" class="slds-select" onchange={handleSelect}>
            <template for:each={recentRequests} for:item="req">
              <option key={req.id} value={req.id}>
                {req.status} â€” {req.serviceDate}
              </option>
            </template>
          </select>
        </div>
      </template>
    </section>
  </div>
</template>